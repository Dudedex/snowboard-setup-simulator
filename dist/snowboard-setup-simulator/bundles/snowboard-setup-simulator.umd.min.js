!function(t,a){"object"==typeof exports&&"undefined"!=typeof module?a(exports,require("snowboard-setup-simulator/translation/translation-provider"),require("@angular/forms"),require("@angular/common"),require("@angular/platform-browser"),require("@angular/common/locales/de"),require("@angular/common/locales/en"),require("@angular/core"),require("@ngx-translate/core")):"function"==typeof define&&define.amd?define("snowboard-setup-simulator",["exports","snowboard-setup-simulator/translation/translation-provider","@angular/forms","@angular/common","@angular/platform-browser","@angular/common/locales/de","@angular/common/locales/en","@angular/core","@ngx-translate/core"],a):a(t["snowboard-setup-simulator"]={},t.translationProvider,t.ng.forms,t.ng.common,t.ng.platformBrowser,t.ng.common.locales.de,t.ng.common.locales.en,t.ng.core,t.core)}(this,function(t,a,e,n,r,o,i,s,d){"use strict";o=o&&o.hasOwnProperty("default")?o["default"]:o,i=i&&i.hasOwnProperty("default")?i["default"]:i;var l=function(){function t(){}return t.decorators=[{type:s.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=s.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),c=function(){function t(t){this.translate=t}return t.prototype.ngOnInit=function(){this.translationSetup()},t.prototype.ngOnChanges=function(t){this.translationSetup()},t.prototype.translationSetup=function(){a.TranslationProvider.setupTranslationProvider(this.translate,this.locale)},t.decorators=[{type:s.Component,args:[{selector:"lib-snowboard-setup-simulator",template:"\n    <app-board-panel></app-board-panel>\n  "}]}],t.ctorParameters=function(){return[{type:d.TranslateService}]},t.propDecorators={locale:[{type:s.Input}]},t}(),p=function(){function t(){this.cmInPixelFactor=2,this.inchesInCm=2.54,this.mInPixelFactor=200}return t.prototype.ngOnInit=function(){},t.prototype.ngDoCheck=function(){this.boardData&&(this.calculateRightOverhang(),this.calculateLeftOverhang())},t.prototype.getContainerHeight=function(){return $(".board-container")?$(".board-container").height()-2:0},t.prototype.getBoardClass=function(){return"length"===this.boardData.markPart?"red":""},t.prototype.getWaistClass=function(){return"waist"===this.boardData.markPart?"red":""},t.prototype.getSidecutClass=function(){return 0<=["sidecut","length"].indexOf(this.boardData.markPart)?"red":""},t.prototype.isBindingActive=function(t){return 0<=["bindings","boots"].indexOf(this.boardData.markPart)||("right"===t&&0<=["rightBinding","bindingsBootPlateRight"].indexOf(this.boardData.markPart)?(console.log("right active"),!0):"left"===t&&0<=["leftBinding","bindingsBootPlateLeft"].indexOf(this.boardData.markPart)?(console.log("left active"),!0):void 0)},t.prototype.getSidecutMargin=function(){return this.boardData.sidecutInM<6.3?-2:this.boardData.sidecutInM<6.7?-1:this.boardData.sidecutInM<7.2?0:this.boardData.sidecutInM<7.6?1:this.boardData.sidecutInM<8.5?2:this.boardData.sidecutInM<9?3:this.boardData.sidecutInM<9.4?4:this.boardData.sidecutInM<=10?5:6},t.prototype.calculateRightOverhang=function(){var t=this.calculateWidthAtInserts(this.boardData.stance/2+2.54*this.boardData.setBackInInches-2.54*this.boardData.sidecutSetbackInInches),a=this.calculateAbsBoardWidthAtInserts(this.boardData.rightAngle,t),e=this.calculateAbsBoardWidthAtInserts(this.boardData.rightAngle,1);this.currentRightHeelOverhang=Math.floor(100*((this.boardData.bootSize-a)/2-this.boardData.bindingOffsetRight*e))/100,this.currentRightToeOverhang=Math.floor(100*((this.boardData.bootSize-a)/2+this.boardData.bindingOffsetRight*e))/100},t.prototype.calculateLeftOverhang=function(){var t=this.calculateWidthAtInserts(this.boardData.stance/2-2.54*this.boardData.setBackInInches+2.54*this.boardData.sidecutSetbackInInches),a=this.calculateAbsBoardWidthAtInserts(this.boardData.leftAngle,t),e=this.calculateAbsBoardWidthAtInserts(this.boardData.leftAngle,1);this.currentLeftToeOverhang=Math.floor(100*((this.boardData.bootSize-a)/2+this.boardData.bindingOffsetLeft*e))/100,this.currentLeftHeelOverhang=Math.floor(100*((this.boardData.bootSize-a)/2-this.boardData.bindingOffsetLeft*e))/100},t.prototype.calculateWidthAtInserts=function(t){var a=100*this.boardData.sidecutInM,e=t,n=Math.pow(a,2)-Math.pow(e,2),r=Math.sqrt(n);return this.boardData.waist+2*(a-r)},t.prototype.calculateAbsBoardWidthAtInserts=function(t,a){var e,n;return 0===(n=0<=t?t:-t)||0===a?a:(e=90-n,a*Math.sin(90*Math.PI/180)/Math.sin(e*Math.PI/180))},t.decorators=[{type:s.Component,args:[{selector:"app-board",template:'<div *ngIf="boardData">\r\n  <app-overhang-panel [boardData]="boardData" [placement]="\'top\'" [leftOverhang]="currentLeftToeOverhang" [rightOverhang]="currentRightToeOverhang"></app-overhang-panel>\r\n  <div class="board"  [style.width.px]="boardData.length * cmInPixelFactor + 6">\r\n    <div class="binding--right" [style.right.px]="boardData.length + 6 - (cmInPixelFactor + boardData.stance + boardData.setBackInInches * inchesInCm * cmInPixelFactor )">\r\n      <app-binding [isActive]="isBindingActive(\'right\')" [activeType]="boardData.markPart" [angle]="boardData.rightAngle" [bootSize]="boardData.bootSize" [boardWidth]="boardData.waist * cmInPixelFactor + boardData.sidecutInM" [bindingOffset]="boardData.bindingOffsetRight"></app-binding>\r\n    </div>\r\n    <div class="binding--left" [style.left.px]="boardData.length + 6 - boardData.stance + boardData.setBackInInches * inchesInCm * cmInPixelFactor">\r\n      <app-binding [isActive]="isBindingActive(\'left\')" [activeType]="boardData.markPart" [angle]="boardData.leftAngle" [bootSize]="boardData.bootSize" [boardWidth]="boardData.waist * cmInPixelFactor + boardData.sidecutInM" [bindingOffset]="boardData.bindingOffsetLeft"></app-binding>\r\n    </div>\r\n    <div class="board-container" [style.width.px]="boardData.length * cmInPixelFactor + 6" [style.height.px]="boardData.waist * cmInPixelFactor + boardData.sidecutInM" #boardContainer>\r\n      <div class="board-boarder {{getBoardClass()}}" [style.width.px]="boardData.length * cmInPixelFactor + 6" [style.height.px]="boardData.waist * cmInPixelFactor + boardData.sidecutInM">\r\n        <div class="sidecut sidecut-top {{getSidecutClass()}}"\r\n             [style.width.px]="boardData.sidecutInM * mInPixelFactor * 2"\r\n             [style.height.px]="boardData.sidecutInM * mInPixelFactor * 2"\r\n             [style.margin-left.px]=" - boardData.sidecutInM * 200 + cmInPixelFactor + boardData.length + boardData.sidecutSetbackInInches * inchesInCm"\r\n             [style.margin-top.px]="-boardData.sidecutInM * mInPixelFactor * 2 + getContainerHeight() - boardData.waist * cmInPixelFactor - getSidecutMargin()"\r\n        ></div>\r\n        <div class="waist {{getWaistClass()}}" [style.right.px]="boardData.length - boardData.sidecutSetbackInInches * inchesInCm * cmInPixelFactor"></div>\r\n        <div class="sidecut sidecut-bot {{getSidecutClass()}}"\r\n             [style.width.px]="boardData.sidecutInM * mInPixelFactor * 2"\r\n             [style.height.px]="boardData.sidecutInM * mInPixelFactor * 2"\r\n             [style.margin-left.px]=" - boardData.sidecutInM * 200 + cmInPixelFactor + boardData.length + boardData.sidecutSetbackInInches * inchesInCm"\r\n             [style.margin-top.px]="boardData.waist * cmInPixelFactor + getSidecutMargin()"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <app-overhang-panel [boardData]="boardData" [placement]="\'bot\'" [leftOverhang]="currentLeftHeelOverhang" [rightOverhang]="currentRightHeelOverhang"></app-overhang-panel>\r\n</div>\r\n',styles:[".board-container{position:relative;overflow:hidden;margin:0 auto}.board-boarder{border-radius:50px;border:1px solid #000;position:relative}.board{position:relative;margin:0 auto}.sidecut{position:absolute;border:1px solid #000;border-radius:100%;z-index:5;background:#fff;margin:0 auto}.waist{min-width:0;min-height:100%;z-index:8;position:absolute;border:1px dashed #000}.binding--left,.binding--right{position:absolute}.red{border-color:red}"]}]}],t.ctorParameters=function(){return[]},t.propDecorators={boardData:[{type:s.Input}]},t}(),g=function y(){},b=function(){function t(){this.boardData=new g,this.boardData.length=155,this.boardData.waist=25.5,this.boardData.sidecutInM=7.6,this.boardData.sidecutSetbackInInches=0,this.boardData.stance=53,this.boardData.leftAngle=15,this.boardData.rightAngle=-6,this.boardData.bootSize=30.5,this.boardData.bindingOffsetLeft=0,this.boardData.bindingOffsetRight=0,this.boardData.setBackInInches=1}return t.prototype.ngOnInit=function(){},t.decorators=[{type:s.Component,args:[{selector:"app-board-panel",template:'<div class="main">\r\n  <div class="panel__bd board">\r\n    <app-board [boardData]="boardData"></app-board>\r\n  </div>\r\n  <app-data-input-form [boardData]="boardData"></app-data-input-form>\r\n</div>\r\n',styles:[".board{min-height:80px;margin:0 auto}.main{width:100%;min-width:300px;margin-bottom:5rem}"]}]}],t.ctorParameters=function(){return[]},t}(),u=function(){function t(){}return t.prototype.ngOnInit=function(){},t.prototype.ngOnChanges=function(t){},t.prototype.getFootbedClass=function(){return this.isActive&&0<=["bindingsBootPlateLeft","bindingsBootPlateRight","boots"].indexOf(this.activeType)?"plate-active":""},t.prototype.getBidingClass=function(){return this.isActive&&0<=["bindings","leftBinding","rightBinding","boots"].indexOf(this.activeType)?"binding-active":""},t.decorators=[{type:s.Component,args:[{selector:"app-binding",template:'<div class="binding {{getBidingClass()}}" [style.transform]="\'rotate(\' + (360 - angle) + \'deg)\'" [style.height.px]="bootSize * 2"\r\n     [style.width.px]="bootSize/5 * 4" [style.margin-left.px]="-bootSize/5 * 2" [style.margin-top.px]="(boardWidth - bootSize *2)/2  - bindingOffset*2">\r\n  <div class="footbed {{getFootbedClass()}}" [style.width.px]="bootSize/5 * 4 -2" [style.height.px]="bootSize * 1.25" [style.margin-top.px]="bootSize/5 * 1.7">\r\n    /\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\<br>\r\n    /\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\<br>\r\n    /\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\<br>\r\n    /\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\<br>\r\n    /\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\<br>\r\n    /\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\<br>\r\n    /\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\<br>\r\n    /\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\<br>\r\n    /\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\<br>\r\n    /\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\<br>\r\n    /\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\/\\<br>\r\n  </div>\r\n</div>\r\n',styles:[".binding{border-radius:40% 40% 38% 38%;border:1px solid #000;border-bottom:5px solid #000;border-top:2px solid #000;position:absolute;overflow:hidden;z-index:10;margin-top:0}.footbed{text-align:center;overflow:hidden;font-size:.6rem;background-color:gray}.plate-active{background-color:rgba(255,0,0,.5)}.binding-active{border:3px solid red}"]}]}],t.ctorParameters=function(){return[]},t.propDecorators={angle:[{type:s.Input}],bootSize:[{type:s.Input}],boardWidth:[{type:s.Input}],bindingOffset:[{type:s.Input}],isActive:[{type:s.Input}],activeType:[{type:s.Input}]},t}(),h=function(){function t(){}return t.prototype.ngOnInit=function(){},t.prototype.getWarningLevel=function(t){return t<1.75?"#03d800":t<2?"#94ec00":t<2.25?"#dddd00":t<2.5?"#ed8649":"#da0000"},t.prototype.getWarningWidth=function(t){return t<2?2:t<2.5?3:4},t.decorators=[{type:s.Component,args:[{selector:"app-overhang-panel",template:'<div class="overhang" *ngIf="boardData" [style.width.px]="boardData.length * 2">\r\n  <span class="overhang-label--{{placement}}" [style.float]="\'left\'" [style.left.px]="boardData.length - (2 + boardData.stance - boardData.setBackInInches *2.54 * 2) - 30">{{leftOverhang}} cm</span>\r\n  <span class="overhang-label--{{placement}}" [style.float]="\'right\'" [style.right.px]="boardData.length  - (2 + boardData.stance + boardData.setBackInInches *2.54 * 2) - 30">{{rightOverhang}} cm</span>\r\n  <span *ngIf="leftOverhang >= 1" class="overhang-warning-{{placement}}"\r\n        [style.border-color]="getWarningLevel(leftOverhang)"\r\n        [style.border-width.px]="getWarningWidth(leftOverhang)"\r\n        [style.float]="\'left\'"\r\n        [style.left.px]="boardData.length - (2 + boardData.stance - boardData.setBackInInches *2.54 * 2) - 25">\r\n        </span>\r\n  <span *ngIf="rightOverhang >= 1" class="overhang-warning-{{placement}}"\r\n        [style.border-color]="getWarningLevel(rightOverhang)"\r\n        [style.border-width.px]="getWarningWidth(rightOverhang)"\r\n        [style.float]="\'right\'"\r\n        [style.right.px]="boardData.length  - (2 + boardData.stance + boardData.setBackInInches *2.54 * 2) - 25">\r\n        </span>\r\n  <div class="overhang-{{placement}}-title">\r\n    <ng-container *ngIf="placement === \'top\'">\r\n      {{\'page.snowboardSetup.toeOverhang\' | translate}}\r\n    </ng-container>\r\n    <ng-container *ngIf="placement === \'bot\'">\r\n      {{\'page.snowboardSetup.heelOverhang\' | translate}}\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n',styles:[".overhang{position:relative;margin:10px auto;text-align:center}.overhang-label--top{position:absolute;bottom:-2.5rem}.overhang-label--bot{position:absolute;top:-2.5rem}.overhang-top-title{margin-bottom:4rem}.overhang-bot-title{margin-top:4rem}.overhang-warning-top{position:absolute;bottom:-5.2rem;z-index:20;height:1.5rem;width:5rem;border-style:dashed}.overhang-warning-bot{margin-top:-2.7rem;z-index:20;height:1.5rem;width:5rem;border-style:dashed;position:absolute;top:-2.5rem}"]}]}],t.ctorParameters=function(){return[]},t.propDecorators={boardData:[{type:s.Input}],leftOverhang:[{type:s.Input}],rightOverhang:[{type:s.Input}],placement:[{type:s.Input}]},t}(),f=function(){function t(){}return t.prototype.ngOnInit=function(){},t.prototype.setMarkPart=function(t){this.boardData.markPart=t},t.decorators=[{type:s.Component,args:[{selector:"app-data-input-form",template:'<div class="container-fluid" *ngIf="boardData">\r\n  <div class="row">\r\n    <label class="col-xs-8">{{\'page.snowboardSetup.length\' | translate}}:</label>\r\n    <input class="col-xs-3" type="number" [(ngModel)]="boardData.length"  step="3" (focus)="setMarkPart(\'length\')">\r\n  </div>\r\n  <div class="row">\r\n    <label class="col-xs-8">{{\'page.snowboardSetup.waist\' | translate}}:</label>\r\n    <input class="col-xs-3" type="number" [(ngModel)]="boardData.waist" step="0.1" (focus)="setMarkPart(\'waist\')">\r\n  </div>\r\n  <div class="row">\r\n    <label class="col-xs-8">{{\'page.snowboardSetup.sidecutRadius\' | translate}}:</label>\r\n    <input class="col-xs-3" type="number" [(ngModel)]="boardData.sidecutInM" step="0.1" max="10" min="6" (focus)="setMarkPart(\'sidecut\')">\r\n  </div>\r\n  <div class="row">\r\n    <label class="col-xs-8">{{\'page.snowboardSetup.sidecutSetback\' | translate}}:</label>\r\n    <input class="col-xs-3" type="number" [(ngModel)]="boardData.sidecutSetbackInInches" step="0.1" (focus)="setMarkPart(\'sidecut\')">\r\n  </div>\r\n  <div class="row">\r\n    <label class="col-xs-8">{{\'page.snowboardSetup.stanceSetback\' | translate}}:</label>\r\n    <input class="col-xs-3" type="number" [(ngModel)]="boardData.setBackInInches"  step="0.1" (focus)="setMarkPart(\'bindings\')">\r\n  </div>\r\n  <div class="row">\r\n    <label class="col-xs-8">{{\'page.snowboardSetup.stanceWidth\' | translate}}:</label>\r\n    <input class="col-xs-3" type="number" [(ngModel)]="boardData.stance" (focus)="setMarkPart(\'bindings\')">\r\n  </div>\r\n  <div class="row">\r\n    <label class="col-xs-8">{{\'page.snowboardSetup.angleLeft\' | translate}}:</label>\r\n    <input class="col-xs-3" type="number" [(ngModel)]="boardData.leftAngle" step="3" (focus)="setMarkPart(\'leftBinding\')">\r\n  </div>\r\n  <div class="row">\r\n    <label class="col-xs-8">{{\'page.snowboardSetup.angleRight\' | translate}}:</label>\r\n    <input class="col-xs-3" type="number" [(ngModel)]="boardData.rightAngle" step="3" (focus)="setMarkPart(\'rightBinding\')">\r\n  </div>\r\n  <div class="row">\r\n    <label class="col-xs-8">{{\'page.snowboardSetup.bootProfile\' | translate}}:</label>\r\n    <input class="col-xs-3" type="number" [(ngModel)]="boardData.bootSize" step="0.5" (focus)="setMarkPart(\'boots\')">\r\n  </div>\r\n  <div class="row">\r\n    <label class="col-xs-8">{{\'page.snowboardSetup.bindingOffsetLeft\' | translate}}:</label>\r\n    <input class="col-xs-3" type="number" [(ngModel)]="boardData.bindingOffsetLeft" step="0.1" (focus)="setMarkPart(\'bindingsBootPlateLeft\')">\r\n  </div>\r\n  <div class="row">\r\n    <label class="col-xs-8">{{\'page.snowboardSetup.bindingOffsetRight\' | translate}}:</label>\r\n    <input class="col-xs-3" type="number" [(ngModel)]="boardData.bindingOffsetRight" step="0.1" (focus)="setMarkPart(\'bindingsBootPlateRight\')">\r\n  </div>\r\n</div>\r\n',styles:[".row{margin-bottom:.5rem;padding-left:3rem;padding-right:3rem}.container-fluid{margin-bottom:3rem}.plate-active{background-color:rgba(255,11,0,.5)}"]}]}],t.ctorParameters=function(){return[]},t.propDecorators={boardData:[{type:s.Input}]},t}(),m=function(){function t(){}return t.translation=function(){return{"page.snowboardSetup.toeOverhang":"Zehenüberstand","page.snowboardSetup.heelOverhang":"Fersenüberstand","page.snowboardSetup.length":"Länge (in cm)","page.snowboardSetup.waist":"Tailie (in cm)","page.snowboardSetup.sidecutRadius":"Sidecut Radius (in m)","page.snowboardSetup.sidecutSetback":"Sidecut Rückversätzung (in inches)","page.snowboardSetup.stanceSetback":"Haltung Rückversätzung (in inches)","page.snowboardSetup.stanceWidth":"Standbreite (in cm)","page.snowboardSetup.angleLeft":"Bindungswinkel Links (in °)","page.snowboardSetup.angleRight":"Bindungswinkel Rechts (in °)","page.snowboardSetup.bootProfile":"Schuhprofilgröße (in cm)","page.snowboardSetup.bindingOffsetLeft":"Bindungsversatz Links (in cm)","page.snowboardSetup.bindingOffsetRight":"Bindungsversatz Rechts (in cm)"}},t}(),v=function(){function t(){}return t.translation=function(){return{"page.snowboardSetup.toeOverhang":"Toe overhang","page.snowboardSetup.heelOverhang":"Heel overhang","page.snowboardSetup.length":"Length (in cm)","page.snowboardSetup.waist":"Waist (in cm)","page.snowboardSetup.sidecutRadius":"Sidecut radius (in m)","page.snowboardSetup.sidecutSetback":"Sidecut Setback (in inches)","page.snowboardSetup.stanceSetback":"Stance Setback (in inches)","page.snowboardSetup.stanceWidth":"Stance width (in cm)","page.snowboardSetup.angleLeft":"Angle left foot (in °)","page.snowboardSetup.angleRight":"Angle right foot (in °)","page.snowboardSetup.bootProfile":"Boot Profile Size(in cm)","page.snowboardSetup.bindingOffsetLeft":"Binding offset left(in cm)","page.snowboardSetup.bindingOffsetRight":"Binding offset right(in cm)"}},t}(),D=function(){function t(){}return t.setupTranslationProvider=function(t,a){t.setTranslation("de",m.translation()),t.setTranslation("en",v.translation()),a?t.setDefaultLang(a):t.setDefaultLang("de")},t}();n.registerLocaleData(o),n.registerLocaleData(i);var I=function(){function t(){}return t.decorators=[{type:s.NgModule,args:[{declarations:[p,b,u,h,f,c],imports:[r.BrowserModule,e.FormsModule,n.CommonModule,d.TranslateModule.forRoot()],providers:[D,m,v],exports:[c]}]}],t}();t.SnowboardSetupSimulatorService=l,t.SnowboardSetupSimulatorComponent=c,t.SnowboardSetupSimulatorModule=I,t.ɵc=u,t.ɵb=b,t.ɵa=p,t.ɵe=f,t.ɵd=h,t.ɵg=m,t.ɵh=v,t.ɵf=D,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=snowboard-setup-simulator.umd.min.js.map